# Smart Credentials Deployment - Sepolia

**Version:** 1.0.0  
**Date:** December 24, 2025  
**Network:** Sepolia (Chain ID: 11155111)  
**Status:** ✅ Deployed and Verified

## Deployment Summary

This deployment includes the Smart Credentials reference implementation contracts for ERC-XXXX: Smart Credentials.

### Deployed Contracts

| Contract | Address | Verified | Notes |
|----------|---------|----------|-------|
| AgentProjects | `0x839055422662E202E29583232014f3cb31c5F263` | ✅ | [View on Etherscan](https://sepolia.etherscan.io/address/0x839055422662e202e29583232014f3cb31c5f263) |

### Deployment Details

- **Deployer Address:** `0xF8e03bd4436371E0e2F7C02E529b2172fe72b4EF`
- **Compiler Version:** Solidity 0.8.30
- **EVM Version:** Prague
- **Total Gas Used:** ~2,133,245 gas
- **Estimated Cost:** ~0.000005 ETH

## Contract Details

### AgentProjects

**Address:** `0x839055422662E202E29583232014f3cb31c5F263`  
**Source:** `src/credentials/AgentProjects.sol`  
**Type:** Smart Credential implementation  
**Verified:** ✅ [View on Etherscan](https://sepolia.etherscan.io/address/0x839055422662e202e29583232014f3cb31c5f263)

A full-featured Smart Credential contract implementing:
- **ERC-8048**: Token-level metadata extension
- **ERCXXXXReviews**: Reviews extension with double mapping storage
- **Ownable**: OpenZeppelin Ownable for ownership management
- **Authorization**: ERC-6909-style authorization (owner, operator, approved)

**Constructor Arguments:**
- `agentRegistry`: `0xD0a769d82F6e0bf9d8913E570b6C823c8f7e9f40` (default registry)

**Interfaces Supported:**
- `IERC165`
- `IERC8048`
- `IERCXXXXReviews`
- `IAgentProjects`

**Features:**
- Project metadata management via `setProject()`
- Peer review system via `review()`
- Authorization checks for agent owners, operators, and approved addresses
- Diamond Storage pattern for predictable storage locations
- Updatable agent registry (owner can change via `setAgentRegistry()`)
- Default agent registry: `0xD0a769d82F6e0bf9d8913E570b6C823c8f7e9f40`

## Usage Examples

### Set Project Metadata

```solidity
import {AgentProjects} from "./src/credentials/AgentProjects.sol";

AgentProjects projects = AgentProjects(0x839055422662E202E29583232014f3cb31c5F263);

// Set project data (requires authorization)
projects.setProject(agentId, "project-name", "My Project");
```

### Submit a Review

```solidity
bytes memory reviewData = "score: 95 review: excellent work";
projects.review(reviewerId, reviewedId, reviewData);
```

### Update Agent Registry

```solidity
// Only contract owner can update registry
projects.setAgentRegistry(newRegistryAddress);
```

### Transfer Ownership

```solidity
// Transfer contract ownership
projects.transferOwnership(newOwner);
```

## Query Functions

### Verified Working Examples

```bash
# Get agent registry address ✅ Verified
cast call 0x839055422662E202E29583232014f3cb31c5F263 \
  "agentRegistry()(address)" \
  --rpc-url $SEPOLIA_RPC_URL
# Returns: 0xD0a769d82F6e0bf9d8913E570b6C823c8f7e9f40

# Get contract owner ✅ Verified
cast call 0x839055422662E202E29583232014f3cb31c5F263 \
  "owner()(address)" \
  --rpc-url $SEPOLIA_RPC_URL
# Returns: 0xF8e03bd4436371E0e2F7C02E529b2172fe72b4EF

# Check IERC165 interface support ✅ Verified
cast call 0x839055422662E202E29583232014f3cb31c5F263 \
  "supportsInterface(bytes4)(bool)" \
  0x01ffc9a7 \
  --rpc-url $SEPOLIA_RPC_URL
# Returns: true

# Get project metadata (returns empty if not set) ✅ Verified
cast call 0x839055422662E202E29583232014f3cb31c5F263 \
  "getMetadata(uint256,string)(bytes)" \
  <agentId> "project-name" \
  --rpc-url $SEPOLIA_RPC_URL
# Returns: 0x (empty bytes if not set)

# Get review (returns empty if not set) ✅ Verified
cast call 0x839055422662E202E29583232014f3cb31c5F263 \
  "getReview(uint256,uint256)(bytes)" \
  <reviewerId> <reviewedId> \
  --rpc-url $SEPOLIA_RPC_URL
# Returns: 0x (empty bytes if not set)
```

### Additional Queries

```bash
# Check IERC8048 interface support
cast call 0x839055422662E202E29583232014f3cb31c5F263 \
  "supportsInterface(bytes4)(bool)" \
  <IERC8048_INTERFACE_ID> \
  --rpc-url $SEPOLIA_RPC_URL

# Check IERCXXXXReviews interface support
cast call 0x839055422662E202E29583232014f3cb31c5F263 \
  "supportsInterface(bytes4)(bool)" \
  <IERCXXXXReviews_INTERFACE_ID> \
  --rpc-url $SEPOLIA_RPC_URL
```

## Verification

**AgentProjects:** ✅ Successfully verified on Etherscan  
**Verification GUID:** `svuuipvipfgwpxkdvuskd72cacstybd7pfybinfbxctzsych2n`  
**Etherscan URL:** https://sepolia.etherscan.io/address/0x839055422662e202e29583232014f3cb31c5f263

### Onchain Verification Results

All contract functions tested and verified working:

- ✅ `agentRegistry()` returns: `0xD0a769d82F6e0bf9d8913E570b6C823c8f7e9f40`
- ✅ `owner()` returns: `0xF8e03bd4436371E0e2F7C02E529b2172fe72b4EF`
- ✅ `supportsInterface(IERC165)` returns: `true`
- ✅ `getMetadata()` returns empty bytes for non-existent keys (as expected)
- ✅ `getReview()` returns empty bytes for non-existent reviews (as expected)

Contract is fully functional and ready for use.

## Transaction Details

Transaction data saved to:
- `broadcast/Deploy.s.sol/11155111/run-latest.json`
- `cache/Deploy.s.sol/11155111/run-latest.json`

## Configuration

- **Agent Registry:** `0xD0a769d82F6e0bf9d8913E570b6C823c8f7e9f40` (default, can be updated by owner)
- **Contract Owner:** `0xF8e03bd4436371E0e2F7C02E529b2172fe72b4EF`
- **Network:** Sepolia Testnet

## Features

### Updatable Registry

The contract owner can update the agent registry address using `setAgentRegistry()`. This allows flexibility to switch between different agent registries without redeploying the contract.

### Ownership Management

The contract uses OpenZeppelin's `Ownable` pattern, providing:
- `owner()` - Get current owner
- `transferOwnership(address)` - Transfer ownership
- `renounceOwnership()` - Renounce ownership (sets to zero address)

### Default Registry

If no registry address is provided during deployment (zero address), the contract defaults to `0xD0a769d82F6e0bf9d8913E570b6C823c8f7e9f40`.

## Next Steps

1. ✅ Contract deployed and verified
2. Test contract functionality with registered agents
3. Integrate with identity systems using ERC-XXXX Hooks
4. Update agent registry if needed using `setAgentRegistry()`

## References

- [ERC-XXXX: Smart Credentials](https://eips.ethereum.org/EIPS/eip-XXXX)
- [ERC-8048: Token Metadata Extension](https://eips.ethereum.org/EIPS/eip-8048)
- [ERC-6909: Multi Token Standard](https://eips.ethereum.org/EIPS/eip-6909)
- [OpenZeppelin Ownable](https://docs.openzeppelin.com/contracts/4.x/access-control#ownership-and-ownable)
